<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Key Immutability and Changing Settings </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Key Immutability and Changing Settings ">
    <meta name="generator" content="docfx 2.24.0.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="/foo">
    <meta property="docfx:tocrel" content="../../../toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="security/data-protection/implementation/key-immutability">
<h1 id="key-immutability-and-changing-settings" sourcefile="security/data-protection/implementation/key-immutability.md" sourcestartlinenumber="15" sourceendlinenumber="15">Key Immutability and changing settings</h1>

<p sourcefile="security/data-protection/implementation/key-immutability.md" sourcestartlinenumber="17" sourceendlinenumber="17">Once an object is persisted to the backing store, its representation is forever fixed. New data can be added to the backing store, but existing data can never be mutated. The primary purpose of this behavior is to prevent data corruption.</p>
<p sourcefile="security/data-protection/implementation/key-immutability.md" sourcestartlinenumber="19" sourceendlinenumber="19">One consequence of this behavior is that once a key is written to the backing store, it is immutable. Its creation, activation, and expiration dates can never be changed, though it can revoked by using IKeyManager. Additionally, its underlying algorithmic information, master keying material, and encryption at rest properties are also immutable.</p>
<p sourcefile="security/data-protection/implementation/key-immutability.md" sourcestartlinenumber="21" sourceendlinenumber="21">If the developer changes any setting that affects key persistence, those changes will not go into effect until the next time a key is generated, either via an explicit call to IKeyManager.CreateNewKey or via the data protection system&#39;s own <a href="key-management.html#data-protection-implementation-key-management" data-raw-source="[automatic key generation](key-management.md#data-protection-implementation-key-management)" sourcefile="security/data-protection/implementation/key-immutability.md" sourcestartlinenumber="21" sourceendlinenumber="21">automatic key generation</a> behavior. The settings that affect key persistence are as follows:</p>
<ul sourcefile="security/data-protection/implementation/key-immutability.md" sourcestartlinenumber="23" sourceendlinenumber="27">
<li sourcefile="security/data-protection/implementation/key-immutability.md" sourcestartlinenumber="23" sourceendlinenumber="23"><p sourcefile="security/data-protection/implementation/key-immutability.md" sourcestartlinenumber="23" sourceendlinenumber="23"><a href="key-management.html#data-protection-implementation-key-management" data-raw-source="[The default key lifetime](key-management.md#data-protection-implementation-key-management)" sourcefile="security/data-protection/implementation/key-immutability.md" sourcestartlinenumber="23" sourceendlinenumber="23">The default key lifetime</a></p>
</li>
<li sourcefile="security/data-protection/implementation/key-immutability.md" sourcestartlinenumber="25" sourceendlinenumber="25"><p sourcefile="security/data-protection/implementation/key-immutability.md" sourcestartlinenumber="25" sourceendlinenumber="25"><a href="key-encryption-at-rest.html#data-protection-implementation-key-encryption-at-rest" data-raw-source="[The key encryption at rest mechanism](key-encryption-at-rest.md#data-protection-implementation-key-encryption-at-rest)" sourcefile="security/data-protection/implementation/key-immutability.md" sourcestartlinenumber="25" sourceendlinenumber="25">The key encryption at rest mechanism</a></p>
</li>
<li sourcefile="security/data-protection/implementation/key-immutability.md" sourcestartlinenumber="27" sourceendlinenumber="27"><p sourcefile="security/data-protection/implementation/key-immutability.md" sourcestartlinenumber="27" sourceendlinenumber="27"><a href="../configuration/overview.html#data-protection-changing-algorithms" data-raw-source="[The algorithmic information contained within the key](../configuration/overview.md#data-protection-changing-algorithms)" sourcefile="security/data-protection/implementation/key-immutability.md" sourcestartlinenumber="27" sourceendlinenumber="27">The algorithmic information contained within the key</a></p>
</li>
</ul>
<p sourcefile="security/data-protection/implementation/key-immutability.md" sourcestartlinenumber="29" sourceendlinenumber="29">If you need these settings to kick in earlier than the next automatic key rolling time, consider making an explicit call to IKeyManager.CreateNewKey to force the creation of a new key. Remember to provide an explicit activation date ({ now + 2 days } is a good rule of thumb to allow time for the change to propagate) and expiration date in the call.</p>
<div class="TIP" sourcefile="security/data-protection/implementation/key-immutability.md" sourcestartlinenumber="31" sourceendlinenumber="31"><h5>Tip</h5><p sourcefile="security/data-protection/implementation/key-immutability.md" sourcestartlinenumber="32" sourceendlinenumber="32">All applications touching the repository should specify the same settings with the IDataProtectionBuilder extension methods, otherwise the properties of the persisted key will be dependent on the particular application that invoked the key generation routines.</p>
</div>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/aspnet/Docs/blob/w/riande/RP-EF/aspnetcore/security/data-protection/implementation/key-immutability.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright Â© 2015-2017 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
