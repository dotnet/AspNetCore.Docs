---
title: How to use OpenAPI with minimal APIs
author: rick-anderson
description: Learn how to use OpenApi (Swagger and Swashbuckle) features of minimal APIs in ASP.NET Core.
ms.author: riande
monikerRange: '>= aspnetcore-6.0'
ms.date: 08/23/2022
uid: fundamentals/minimal-apis/openapi
---

# OpenAPI support in minimal APIs - ASP.NET Core

:::moniker range="= aspnetcore-6.0"

An app can describe the [OpenAPI specification](https://swagger.io/specification/) for route handlers using [Swashbuckle](https://www.nuget.org/packages/Swashbuckle.AspNetCore/).

The following code is a typical ASP.NET Core app with OpenAPI support:

[!code-csharp[](samples/WebMinAPIs/Program.cs?name=snippet_swag)]

### Exclude Open API description

In the following sample, the `/skipme` endpoint is excluded from generating an OpenAPI description:

[!code-csharp[](samples/WebMinAPIs/Program.cs?name=snippet_swag2)]

### Describe response types

The following example uses the built-in result types to customize the response:

[!code-csharp[](samples/todo/Program.cs?name=snippet_getCustom)]

### Add operation ids to Open API

[!code-csharp[](samples/todo/Program.cs?name=snippet_name)]

### Add tags to the Open API description

The following code uses an [OpenAPI grouping tag](https://swagger.io/docs/specification/grouping-operations-with-tags/):

[!code-csharp[](samples/todo/Program.cs?name=snippet_grp)]

:::moniker-end

:::moniker range=">= aspnetcore-7.0"

An app can describe the [OpenAPI specification](https://swagger.io/specification/) for route handlers using [Swashbuckle](https://www.nuget.org/packages/Swashbuckle.AspNetCore/). The OpenAPI specification defines a standard for documenting RESTful APIs so that end users and other services can examine the capabilities of an API service.

The following code is generated by the ASP.NET Core minimal web API template and uses OpenAPI:

[!code-csharp[](7.0-samples/WebMinOpenApi/Program.cs?name=snippet&highlight=1,5-6,12-13,35-36)]

In the preceding highlighted code:

* `Microsoft.AspNetCore.OpenApi` is explained in the next section.
* <xref:Microsoft.Extensions.DependencyInjection.EndpointMetadataApiExplorerServiceCollectionExtensions.AddEndpointsApiExplorer%2A> : Configures the app to use the API Explorer to discover and describe endpoints with default annotations. `WithOpenApi` overrides matching, default annotations generated by the API Explorer with those produced from the `Microsoft.AspNetCore.OpenApi` package.
* `UseSwagger`adds the [Swagger middleware](xref:tutorials/get-started-with-swashbuckle#add-and-configure-swagger-middleware).
* `UseSwaggerUI` enables the [Static File Middleware](xref:fundamentals/static-files).
* <xref:Microsoft.AspNetCore.Builder.RoutingEndpointConventionBuilderExtensions.WithName%2A>: The <xref:Microsoft.AspNetCore.Routing.IEndpointNameMetadata> on the endpoint is used for link generation and is treated as the operation ID in the given endpoint's OpenAPI specification.
* [`WithOpenApi`](https://github.com/dotnet/aspnetcore/blob/8a4b4deb09c04134f22f8d39aae21d212282004f/src/OpenApi/src/OpenApiRouteHandlerBuilderExtensions.cs) is explained later in this article.

<a name="openapinuget"></a>

### `Microsoft.AspNetCore.OpenApi` NuGet package

ASP.NET Core provides the [`Microsoft.AspNetCore.OpenApi`](https://www.nuget.org/packages/Microsoft.AspNetCore.OpenApi/) package to interact with OpenAPI specifications for endpoints. The package acts as a link between the OpenAPI models that are defined in the `Microsoft.AspNetCore.OpenApi` package and the endpoints that are defined in Minimal APIs. The package provides an API that examines an endpoint's parameters, responses, and metadata to construct an OpenAPI annotation type that is used to describe an endpoint.

`Microsoft.AspNetCore.OpenApi` is added as a PackageReference to a project file:

[!code-xml[](7.0-samples/WebMinOpenApi/projectFile.xml?highlight=10)]

When using [`Swashbuckle.AspNetCore`](https://www.nuget.org/packages/Swashbuckle.AspNetCore/) with `Microsoft.AspNetCore.OpenApi`, `Swashbuckle.AspNetCore` 6.3.1 and later must be used. Version 6.4.0 or later is required if you want to [provide endpoint summary or description text](#add-endpoint-summary-or-description).

### `WithOpenApi` call on endpoints adds an OpenAPI annotation

Calling [`WithOpenApi`](https://github.com/dotnet/aspnetcore/blob/8a4b4deb09c04134f22f8d39aae21d212282004f/src/OpenApi/src/OpenApiRouteHandlerBuilderExtensions.cs) on an endpoint without parameters adds an [OpenAPI annotation](https://github.com/dotnet/aspnetcore/blob/8a4b4deb09c04134f22f8d39aae21d212282004f/src/OpenApi/src/OpenApiRouteHandlerBuilderExtensions.cs#L65-L82) to the endpoints metadata. This metadata can be:

* Consumed in third-party packages like [Swashbuckle.AspNetCore](https://www.nuget.org/packages/Swashbuckle.AspNetCore/).
* Displayed in the Swagger user interface or in YAML or JSON generated to define the file.

[!code-csharp[](7.0-samples/todo/Program.cs?name=snippet_withopenapi&highlight=9)]

#### Call `WithOpenApi` with parameters

The [`WithOpenApi`](https://github.com/dotnet/aspnetcore/blob/8a4b4deb09c04134f22f8d39aae21d212282004f/src/OpenApi/src/OpenApiRouteHandlerBuilderExtensions.cs#L49) method accepts a function that can be used to modify the OpenAPI annotation. For example, in the following code, a description is added to the first parameter of the endpoint:

[!code-csharp[](7.0-samples/todo/Program.cs?name=snippet_withopenapi2&highlight=9-99)]

### Exclude Open API description

In the following sample, the `/skipme` endpoint is excluded from generating an OpenAPI description:

[!code-csharp[](7.0-samples/WebMinAPIs/Program.cs?name=snippet_swag2&highlight=20-21)]

### Describe response types

The following example uses the built-in result types to customize the response:

[!code-csharp[](samples/todo/Program.cs?name=snippet_getCustom)]

### Add operation ids to Open API

[!code-csharp[](samples/todo/Program.cs?name=snippet_name)]

### Add tags to the Open API description

The following code uses an [OpenAPI grouping tag](https://swagger.io/docs/specification/grouping-operations-with-tags/):

[!code-csharp[](samples/todo/Program.cs?name=snippet_grp)]

### Add endpoint summary or description

The following highlighted code provides summary and description text for OpenAPI spec generation. You can call extension methods or use attributes:

:::code language="csharp" source="endpoint-description-summary/7.0-samples/OpenAPISummary/Program.cs" id="summary_and_description" highlight="13-14":::

:::code language="csharp" source="endpoint-description-summary/7.0-samples/OpenAPISummary/Program.cs" id="summary_and_description2" highlight="2-3":::

The preceding highlighted code is supported by [`Swashbuckle.AspNetCore`](https://www.nuget.org/packages/Swashbuckle.AspNetCore/) 6.4.0 and later.

<!-- 
# Differences between minimal APIs and APIs with controllers

Moved to uid: tutorials/min-web-api
-->

### ASP.NET Core OpenAPI source code on GitHub

* [WithOpenApi](https://github.com/dotnet/aspnetcore/blob/8a4b4deb09c04134f22f8d39aae21d212282004f/src/OpenApi/src/OpenApiRouteHandlerBuilderExtensions.cs)
* [OpenApiGenerator](https://github.com/dotnet/aspnetcore/blob/main/src/OpenApi/src/OpenApiGenerator.cs)

:::moniker-end
