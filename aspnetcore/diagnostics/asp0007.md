---
title: "ASP0007: Route parameter and argument optionality is mismatched"
description: "Learn about analysis rule ASP0007: Route parameter and argument optionality is mismatched"
author: captainsafia
monikerRange: '>= aspnetcore-3.1'
ms.author: riande
ms.date: 10/21/2021
no-loc: [Home, Privacy, Kestrel, appsettings.json, "ASP.NET Core Identity", cookie, Cookie, Blazor, "Blazor Server", "Blazor WebAssembly", "Identity", "Let's Encrypt", Razor, SignalR]
uid: diagnostics/asp0007
---
| | Value |
|-|-|
| **Rule ID** |ASP0007|
| **Category** |Usage|
| **Fix is breaking or non-breaking** |Non-breaking|

# ASP0007: Route parameter and argument optionality is mismatched

## Cause

A route parameter is declared as optional in the Delegate definition but is marked as optional in the endpoint route.

## Rule description

When an endpoint is declared, optionality of parameters can be declared in both the route template and in the route handler arguments. When a parameter is declared as optional in the handler, it must be declared as optional in the route template as well. For example, the following code:

```csharp
app.MapGet("/todos/{id}", (int? id) => {});
```

Will fail to resolve a match for the following requests at runtime.

> GET /todos

because the `id` parameter was not provided even though it is treated as optional in the route handler.

## How to fix violations

To fix a violation of this rule, make sure that the optionality in the route template and the delegate match. For example, for the following code sample:

```csharp
app.MapGet("/todos/{id}", (int? id) => {});
```

If the parameter is intended to be required, then the following fix should be applied:

```csharp
app.MapGet("/todos/{id}", (int id) => {});
```

If the parameter is intended to be optional, then the following fix should be applied:

```csharp
app.MapGet("/todos/{id?}", (int? id) => {});
```

## When to suppress warnings

Do not suppress a warning from this rule. Mismatched parameter optionality can result in unexpected behavior with routing at runtime.
