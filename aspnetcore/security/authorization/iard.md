---
title: Custom authorization policies with IAuthorizationRequirementData
author: rick-anderson
description: Learn how to add  custom authorization policies with IAuthorizationRequirementData.
ms.author: riande
monikerRange: '>= aspnetcore-8.0'
ms.date: 5/15/2025
uid: security/authorization/iard
---
# Custom authorization policies with IAuthorizationRequirementData

Consider the following sample that implements a custom `MinimumAgeAuthorizationHandler`:

:::code language="csharp" source="~/../AspNetCore.Docs.Samples/security/authorization/AuthRequirementsData/Program.cs" highlight="9":::

The `MinimumAgeAuthorizationHandler` class handles the single <xref:Microsoft.AspNetCore.Authorization.IAuthorizationRequirement> provided by the `MinimumAgeAuthorizeAttribute` implementation of <xref:Microsoft.AspNetCore.Authorization.IAuthorizationRequirementData>, as specified by the generic parameter `MinimumAgeAuthorizeAttribute`:

:::code language="csharp" source="~/../AspNetCore.Docs.Samples/security/authorization/AuthRequirementsData/Authorization/MinimumAgeAuthorizationHandler.cs" highlight="7,19":::

The `GreetingsController` displays the user's name when they satisfy the minimum age policy:

:::code language="csharp" source="~/../AspNetCore.Docs.Samples/security/authorization/AuthRequirementsData/Controllers/GreetingsController.cs" highlight="10":::

The complete sample can be found in the [AuthRequirementsData](https://github.com/dotnet/AspNetCore.Docs.Samples/tree/main/security/authorization/AuthRequirementsData) folder of the [AspNetCore.Docs.Samples](https://github.com/dotnet/AspNetCore.Docs.Samples) repository.

The sample can be tested with [`dotnet user-jwts`](xref:security/authentication/jwt) and curl:

* `dotnet user-jwts create --claim http://schemas.xmlsoap.org/ws/2005/05/identity/claims/dateofbirth=1989-01-01`
* `curl -i -H "Authorization: Bearer <token from dotnet user-jwts>" http://localhost:<port>/api/greetings/hello`

## Dynamic authorization policies

For an example of how to dynamically produce authorization policies based on policy names, see the [`IAuthorizationPolicyProvider` sample app (`dotnet/aspnetcore` GitHub repository](https://github.com/dotnet/aspnetcore/tree/main/src/Security/samples/CustomPolicyProvider#iauthorizationpolicyprovider-sample).

[!INCLUDE[](~/includes/aspnetcore-repo-ref-source-links.md)]

The sample demonstrates an approach for pseudo-parameterized authorization policies using a `MinimumAgePolicyProvider` that produces minimum age policies for any integer age, based on the policy's name. Since authorization policies are identified by name strings, the custom `MinimumAgeAuthorizeAttribute` specifies an age parameter and embeds it into its underlying <xref:Microsoft.AspNetCore.Authorization.AuthorizeAttribute>'s policy name string. The `MinimumAgePolicyProvider` dynamically generates the policies required for use with these attributes by pulling the age from the policy name and creating necessary authorization requirements.

Another example use of <xref:Microsoft.AspNetCore.Authorization.IAuthorizationPolicyProvider> might be loading policy information from an external data source, such as a database.

ASP.NET Core only uses one authorization policy provider, so if not all policies are generated by the custom policy provider, it should fall back to other policy providers, such as the <xref:Microsoft.AspNetCore.Authorization.DefaultAuthorizationPolicyProvider>. This is demonstrated in the sample app by the `MinimumAgePolicyProvider`'s constructor.
